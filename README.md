# Path joiner and normalizer #

PathJoin is a PHP library for joining file systems paths and resolving parent
`..` and current `.` directory references. In order to support both Windows and
Unix platforms, the library treats both forward `/` and backward `\` slashes as
directory separators.

This library makes it easier to join file system paths, since you can ignore the
fact that different directory separators exist. Joining paths together is also
easier, because you don't have to remember if paths are followed by a directory
separator or not.

In some cases this library can also provide additional security, since only the
first path can denote an absolute path and by resolving parent directory
references, it's easier to tell if you're about to access allowed paths.

The API documentation, which can be generated using Apigen, can be read online
at: http://kit.riimu.net/api/pathjoin/

[![Build Status](https://img.shields.io/travis/Riimu/Kit-PathJoin.svg?style=flat)](https://travis-ci.org/Riimu/Kit-PathJoin)
[![Coverage Status](https://img.shields.io/coveralls/Riimu/Kit-PathJoin.svg?style=flat)](https://coveralls.io/r/Riimu/Kit-PathJoin?branch=master)
[![Scrutinizer Code Quality](https://img.shields.io/scrutinizer/g/Riimu/Kit-PathJoin.svg?style=flat)](https://scrutinizer-ci.com/g/Riimu/Kit-PathJoin/?branch=master)

## Requirements ##

In order to use this library, the following requirements must be met:

  * PHP version 5.4

## Installation ##

This library can be installed via [Composer](http://getcomposer.org/). To do
this, download the `composer.phar` and require this library as a dependency. For
example:

```
$ php -r "readfile('https://getcomposer.org/installer');" | php
$ php composer.phar require riimu/kit-pathjoin:1.*
```

Alternatively, you can add the dependency to your `composer.json` and run
`composer install`. For example:

```json
{
    "require": {
        "riimu/kit-pathjoin": "1.*"
    }
}
```

Any library that has been installed via Composer can be loaded by including the
`vendor/autoload.php` file that was generated by Composer.

It is also possible to install this library manually. To do this, download the
[latest release](https://github.com/Riimu/Kit-PathJoin/releases/latest) and
extract the `src` folder to your project folder. To load the library, include
the provided `src/autoload.php` file.

## Usage ##

This library provides exactly one method: `Path::join($path, ...)`. This method
can either take paths as multiple arguments or as a single array. The returned
path uses the system directory separators. For example:

```php
<?php

require 'vendor/autoload.php';

use Riimu\Kit\PathJoin\Path;
echo Path::join('foo', 'bar') . PHP_EOL; // Will output 'foo/bar' or 'foo\bar'
echo Path::join('foo', '/bar/baz') . PHP_EOL; // Will output 'foo/bar/baz' or 'foo\bar\baz'

// Passing an array works fine too
echo Path::join(['foo', 'bar']) . PHP_EOL; // Will output 'foo/bar' or 'foo\bar'

// You can mix and match the directory separators, irregardless of the system
echo Path::join(['/foo', '\bar\baz']) . PHP_EOL;  // Will output '/foo/bar/baz' or '\foo\bar\baz'
```

The method will also traverse any parent directory appropriately. Note that
there is a slight difference in how absolute and relative paths are handled:

```php
<?php

require 'vendor/autoload.php';

use Riimu\Kit\PathJoin\Path;
echo Path::join('foo/bar', '../baz') . PHP_EOL; // Will output 'foo/baz'
echo Path::join('foo/bar', '../../baz') . PHP_EOL; // Will output 'baz'
echo Path::join('foo/bar', '../../../baz') . PHP_EOL; // Will output '../baz'

echo Path::join('/foo/bar', '../baz') . PHP_EOL; // Will output '/foo/baz'
echo Path::join('/foo/bar', '../../baz') . PHP_EOL; // Will output '/baz'
echo Path::join('/foo/bar', '../../../baz') . PHP_EOL; // Will output '/baz'

// Windows drive names are understood as absolute paths:
echo Path::join('C:\foo\bar', '..\..\..\baz') . PHP_EOL; // Will output 'C:\baz'
```

Only the first path in the path list can denote the path as an absolute path.
All following paths are relative to that path. For example:

```php
<?php

require 'vendor/autoload.php';

use Riimu\Kit\PathJoin\Path;
echo Path::join('', '/foo') . PHP_EOL; // Will output 'foo'
echo Path::join('/', '/foo') . PHP_EOL; // Will output '/foo'
```

Current directory paths and empty paths are simply discarded. You can also call
the method with just a single argument to normalize that path, like so:

```php
<?php

require 'vendor/autoload.php';

use Riimu\Kit\PathJoin\Path;
echo Path::join('/foo/.//bar/../baz/') . PHP_EOL; // Will output '/foo/baz'
```

It may be useful to note that the path returned by the method never has a
directory separator in the end.

## Credits ##

This library is copyright 2014 - 2015 to Riikka KalliomÃ¤ki.

See LICENSE for license and copying information.
